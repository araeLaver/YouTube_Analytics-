#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""
YouTube ì±„ë„ ë¶„ì„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
"""

from typing import Dict
import sys
import traceback

class SimpleYouTubeAnalyzer:
    """ê°„ë‹¨í•œ YouTube ì±„ë„ ë¶„ì„ ë„êµ¬"""
    
    def analyze_channel(self, channel_url: str):
        """ì±„ë„ ë¶„ì„ ì‹¤í–‰"""
        print("=" * 60)
        print("YouTube ì±„ë„ ì‚¬ì—…ì„± ë¶„ì„ ë„êµ¬ í…ŒìŠ¤íŠ¸")
        print("=" * 60)
        print(f"ë¶„ì„ ëŒ€ìƒ: {channel_url}")
        print()
        
        # ì±„ë„ ì´ë¦„ ì¶”ì¶œ (ê°„ë‹¨í•œ ë°©ë²•)
        if "@" in channel_url:
            channel_name = channel_url.split("@")[-1]
        else:
            channel_name = "Unknown"
            
        print(f"ì±„ë„ëª…: {channel_name}")
        print()
        
        # ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°ë¡œ ë¶„ì„ ê²°ê³¼ ìƒì„±
        sample_analysis = self.generate_sample_analysis(channel_name)
        
        print("ë¶„ì„ ê²°ê³¼:")
        print(sample_analysis)
        
        # íŒŒì¼ ì €ì¥
        filename = f"analysis_{channel_name}.txt"
        with open(filename, 'w', encoding='utf-8') as f:
            f.write(sample_analysis)
            
        print(f"\në¶„ì„ ì™„ë£Œ! ê²°ê³¼ê°€ '{filename}'ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")
        
        return filename
    
    def generate_sample_analysis(self, channel_name: str) -> str:
        """ìƒ˜í”Œ ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±"""
        
        # ì±„ë„ëª…ì— ë”°ë¥¸ ì¶”ì •ì¹˜ ê³„ì‚°
        if "ë¡œì§" in channel_name or "ì•Œë ¤ì£¼ëŠ”" in channel_name:
            # êµìœ¡ ì±„ë„ ì¶”ì •
            estimated_subs = 50000
            estimated_views = 25000
            category = "êµìœ¡/íŠœí† ë¦¬ì–¼"
        else:
            # ì¼ë°˜ ì±„ë„ ì¶”ì •  
            estimated_subs = 10000
            estimated_views = 5000
            category = "ì¼ë°˜"
            
        # ìˆ˜ìµ ê³„ì‚°
        monthly_ad_revenue = (estimated_views * 8 / 1000) * 2000  # ì›” 8ê°œ ì˜ìƒ, CPM 2000ì›
        sponsorship_rate = estimated_subs * 50 if estimated_subs >= 10000 else 0
        
        report = f"""
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                    YouTube ì±„ë„ ì‚¬ì—…ì„± ë¶„ì„ ë³´ê³ ì„œ
                         ë¶„ì„ ëŒ€ìƒ: {channel_name}
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ

ğŸ“º ì±„ë„ ê¸°ë³¸ ì •ë³´ (ì¶”ì •)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ì±„ë„ëª…: {channel_name}
ì˜ˆìƒ êµ¬ë…ì: {estimated_subs:,}ëª…
ì˜ˆìƒ í‰ê·  ì¡°íšŒìˆ˜: {estimated_views:,}íšŒ
ì½˜í…ì¸  ì¹´í…Œê³ ë¦¬: {category}
ë¶„ì„ ë°©ë²•: íŒ¨í„´ ê¸°ë°˜ ì¶”ì •

ğŸ’° ì˜ˆìƒ ìˆ˜ìµ ë¶„ì„
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ì›” ê´‘ê³  ìˆ˜ìµ: {int(monthly_ad_revenue):,}ì›
ìŠ¤í°ì„œì‹­ ë‹¨ê°€: {int(sponsorship_rate):,}ì›/ê±´
ì˜ˆìƒ ì›” ì´ìˆ˜ìµ: {int(monthly_ad_revenue + (sponsorship_rate/12)):,}ì›

ğŸ“Š ì‹œì¥ í¬ì§€ì…˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"""
        
        # êµ¬ë…ì ë“±ê¸‰
        if estimated_subs >= 100000:
            tier = "ë§¤í¬ë¡œ ì¸í”Œë£¨ì–¸ì„œ (10-100ë§Œëª…)"
            opportunities = [
                "ëŒ€í˜• ë¸Œëœë“œ ìŠ¤í°ì„œì‹­ ê°€ëŠ¥",
                "ìì²´ ë¸Œëœë“œ ìƒí’ˆ ê°œë°œ",
                "ì˜¨ë¼ì¸ ê°•ì˜ í”Œë«í¼ ì§„ì¶œ",
                "ë©¤ë²„ì‹­ ìˆ˜ìµ ê·¹ëŒ€í™”"
            ]
        elif estimated_subs >= 10000:
            tier = "ë§ˆì´í¬ë¡œ ì¸í”Œë£¨ì–¸ì„œ (1-10ë§Œëª…)" 
            opportunities = [
                "ì¤‘ì†Œ ë¸Œëœë“œ í˜‘ì—… ê¸°íšŒ",
                "ì œíœ´ ë§ˆì¼€íŒ… ì‹œì‘",
                "ì»¤ë®¤ë‹ˆí‹° êµ¬ì¶•",
                "ì „ë¬¸ì„± ê¸°ë°˜ ìˆ˜ìµí™”"
            ]
        else:
            tier = "ì‹ ê·œ/ì„±ì¥ í¬ë¦¬ì—ì´í„°"
            opportunities = [
                "1ë§Œëª… êµ¬ë…ì ëª©í‘œ ì„¤ì •",
                "ì½˜í…ì¸  í’ˆì§ˆ í–¥ìƒ ì§‘ì¤‘",
                "SEO ìµœì í™”",
                "ì‡¼ì¸  í™œìš©í•œ ë¹ ë¥¸ ì„±ì¥"
            ]
            
        report += f"""
ë“±ê¸‰: {tier}
ìˆ˜ìµí™” ìƒíƒœ: {"ê°€ëŠ¥" if estimated_subs >= 1000 else "ë¶ˆê°€ëŠ¥ (1,000ëª… ë¯¸ë§Œ)"}

ğŸ¯ ì‚¬ì—… ê¸°íšŒ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"""
        
        for i, opportunity in enumerate(opportunities, 1):
            report += f"\n{i}. {opportunity}"
            
        report += f"""

ğŸ“ˆ ì„±ì¥ ì „ëµ ì¶”ì²œ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. ì½˜í…ì¸  ì „ëµ
   â€¢ ì£¼ì œ: {category} ì¤‘ì‹¬ìœ¼ë¡œ ì „ë¬¸ì„± ê°•í™”
   â€¢ ì—…ë¡œë“œ: ì£¼ 2-3íšŒ ê·œì¹™ì  ì—…ë¡œë“œ
   â€¢ ê¸¸ì´: 8-12ë¶„ ìµœì  ê¸¸ì´ ìœ ì§€

2. ìµœì í™” ì „ëµ
   â€¢ SEO: ì œëª©ì— í•µì‹¬ í‚¤ì›Œë“œ ë°°ì¹˜
   â€¢ ì¸ë„¤ì¼: ê³ ëŒ€ë¹„, ì½ê¸° ì‰¬ìš´ í…ìŠ¤íŠ¸
   â€¢ ì°¸ì—¬ìœ ë„: ì¢‹ì•„ìš”/êµ¬ë…/ëŒ“ê¸€ CTA ê°•í™”

3. ì„±ì¥ ê°€ì†í™”
   â€¢ ì‡¼ì¸ : ì¼ì¼ 1ê°œ ì´ìƒ ì—…ë¡œë“œ
   â€¢ ì»¤ë®¤ë‹ˆí‹°: ì •ê¸°ì  ì†Œí†µ ë° ì´ë²¤íŠ¸
   â€¢ ì½œë¼ë³´: ìœ ì‚¬ ì±„ë„ê³¼ì˜ í˜‘ì—…

ğŸ’¡ ì˜ˆìƒ ì„±ì¥ ì‹œë‚˜ë¦¬ì˜¤
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3ê°œì›” í›„: {int(estimated_subs * 1.5):,}ëª… êµ¬ë…ì
6ê°œì›” í›„: {int(estimated_subs * 2.2):,}ëª… êµ¬ë…ì
1ë…„ í›„: {int(estimated_subs * 4):,}ëª… êµ¬ë…ì

ì˜ˆìƒ ì—° ìˆ˜ìµ: {int((monthly_ad_revenue + (sponsorship_rate/12)) * 12 * 1.5):,}ì›

âš ï¸ ì£¼ì˜ì‚¬í•­
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â€¢ ì´ ë¶„ì„ì€ íŒ¨í„´ ê¸°ë°˜ ì¶”ì •ì¹˜ì…ë‹ˆë‹¤
â€¢ ì‹¤ì œ ìˆ˜ìµì€ ë‹¤ì–‘í•œ ìš”ì¸ì— ë”°ë¼ ë³€ë™ë©ë‹ˆë‹¤
â€¢ ì •í™•í•œ ë¶„ì„ì„ ìœ„í•´ì„œëŠ” YouTube Analytics ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤

ğŸ“ ì¶”ê°€ ë¶„ì„ ì˜µì…˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. YouTube API í‚¤ ì‚¬ìš©í•œ ì •ë°€ ë¶„ì„
2. ê²½ìŸ ì±„ë„ ë²¤ì¹˜ë§ˆí‚¹
3. ì½˜í…ì¸  íŠ¸ë Œë“œ ë¶„ì„
4. ì‹œì²­ì í–‰ë™ íŒ¨í„´ ë¶„ì„

â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                        ë¶„ì„ ì™„ë£Œ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
"""
        
        return report

def main():
    """í…ŒìŠ¤íŠ¸ ì‹¤í–‰"""
    analyzer = SimpleYouTubeAnalyzer()
    
    # í…ŒìŠ¤íŠ¸í•  ì±„ë„ URLë“¤
    test_channels = [
        "https://www.youtube.com/@ë¡œì§ì•Œë ¤ì£¼ëŠ”ë‚¨ì",
        "https://www.youtube.com/@ì½”ë”©ì• í”Œ", 
        "https://www.youtube.com/@ë…¸ë§ˆë“œì½”ë”"
    ]
    
    print("YouTube ì±„ë„ ë¶„ì„ ë„êµ¬ í…ŒìŠ¤íŠ¸ ì‹œì‘\n")
    
    for i, channel_url in enumerate(test_channels, 1):
        print(f"\nã€í…ŒìŠ¤íŠ¸ {i}/{len(test_channels)}ã€‘")
        try:
            result_file = analyzer.analyze_channel(channel_url)
            print(f"ì„±ê³µ: {result_file}")
        except Exception as e:
            print(f"ì˜¤ë¥˜: {str(e)}")
            print(f"ìƒì„¸ ì˜¤ë¥˜: {traceback.format_exc()}")
        
        if i < len(test_channels):
            print("\n" + "â”€" * 60)
    
    print(f"\ní…ŒìŠ¤íŠ¸ ì™„ë£Œ! ì´ {len(test_channels)}ê°œ ì±„ë„ ë¶„ì„")
    print("\nìƒì„±ëœ íŒŒì¼ë“¤:")
    import os
    for file in os.listdir('.'):
        if file.startswith('analysis_') and file.endswith('.txt'):
            print(f"  â€¢ {file}")

if __name__ == "__main__":
    main()